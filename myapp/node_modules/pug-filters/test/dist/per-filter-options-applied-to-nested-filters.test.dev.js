"use strict";

var lex = require('pug-lexer');

var parse = require('pug-parser');

var handleFilters = require('../').handleFilters;

var customFilters = {};
test('per filter options are applied, even to nested filters', function () {
  var source = "\nscript\n  :cdata:uglify-js\n    function myFunc(foo) {\n      return foo;\n    }\n  ";
  var ast = parse(lex(source, {
    filename: __filename
  }), {
    filename: __filename,
    src: source
  });
  var options = {
    'uglify-js': {
      output: {
        beautify: true
      }
    }
  };
  var output = handleFilters(ast, customFilters, options);
  expect(output).toMatchSnapshot(); // TODO: render with `options.filterOptions['uglify-js']`
});